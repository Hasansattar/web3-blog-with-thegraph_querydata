(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[25],{99697:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-post",function(){return t(9506)}])},9506:function(n,e,t){"use strict";t.r(e);var r=t(34051),o=t.n(r),u=t(85893),a=t(67294),i=t(11163),c=t(5152),s=t(20294),f=t(241),l=t(77294),p=t(14400),d=t(31838),h=t(73326);function v(n,e,t,r,o,u,a){try{var i=n[u](a),c=i.value}catch(s){return void t(s)}i.done?e(c):Promise.resolve(c).then(r,o)}function b(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var u=n.apply(e,t);function a(n){v(u,r,o,a,i,"next",n)}function i(n){v(u,r,o,a,i,"throw",n)}a(void 0)}))}}function x(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){x(n,e,t[e])}))}return n}function m(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function w(){var n=m(["\n  display: none;\n"]);return w=function(){return n},n}function y(){var n=m(["\n  max-width: 800px;\n"]);return y=function(){return n},n}function k(){var n=m(["\n  margin-top: 40px;\n"]);return k=function(){return n},n}function j(){var n=m(["\n  margin-top: 40px;\n  border: none;\n  outline: none;\n  background-color: inherit;\n  font-size: 44px;\n  font-weight: 600;\n  &::placeholder {\n    color: #999999;\n  }\n"]);return j=function(){return n},n}function O(){var n=m(["\n  width: 800px;\n  margin: 0 auto;\n"]);return O=function(){return n},n}function N(){var n=m(["\n  background-color: #fafafa;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  cursor: pointer;\n  margin-right: 10px;\n  font-size: 18px;\n  padding: 16px 70px;\n  box-shadow: 7px 7px rgba(0, 0, 0, 0.1);\n"]);return N=function(){return n},n}var P="Basic "+t(48764).Buffer.from("2DMP9vVNMG9xupjSCgd7kkKLg7s:a09c7a10a4c767fd502df5bae335ae33").toString("base64"),_=(0,p.Ue)({host:"ipfs.infura.io",port:5001,protocol:"https",headers:{authorization:P}}),C=(0,c.default)((function(){return Promise.all([t.e(126),t.e(634),t.e(562)]).then(t.bind(t,81634))}),{loadableGenerated:{webpack:function(){return[81634]}},ssr:!1}),S={title:"",content:""};var E=(0,s.iv)(w()),z=(0,s.iv)(y()),R=(0,s.iv)(k()),G=(0,s.iv)(j()),L=(0,s.iv)(O()),M=(0,s.iv)(N());e.default=function(){var n=(0,a.useState)(S),e=n[0],t=n[1],r=(0,a.useState)(null),c=r[0],s=r[1],p=(0,a.useState)(!1),v=p[0],m=p[1],w=(0,a.useRef)(null),y=e.title,k=e.content,j=(0,i.useRouter)();function O(){return(O=b(o().mark((function n(){var e;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(y&&k){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,N();case 4:return e=n.sent,n.next=7,T(e);case 7:j.push("/");case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function N(){return P.apply(this,arguments)}function P(){return(P=b(o().mark((function n(){var t;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_.add(JSON.stringify(e));case 3:return t=n.sent,n.abrupt("return",t.path);case 7:n.prev=7,n.t0=n.catch(0),console.log("error: ",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}function T(n){return U.apply(this,arguments)}function U(){return(U=b(o().mark((function n(t){var r,u,a,i;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("undefined"===typeof window.ethereum){n.next=15;break}return r=new f.Q(window.ethereum),u=r.getSigner(),a=new l.CH(d.i,h.Mt,u),console.log("contract: ",a),n.prev=5,n.next=8,a.createPost(e.title,t);case 8:i=n.sent,console.log("val: ",i),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),console.log("Error: ",n.t0);case 15:case"end":return n.stop()}}),n,null,[[5,12]])})))).apply(this,arguments)}function B(){return(B=b(o().mark((function n(e){var r,u;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.target.files[0]){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,_.add(r);case 5:u=n.sent,t((function(n){return g({},n,{coverImage:u.path})})),s(r);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,a.useEffect)((function(){setTimeout((function(){m(!0)}),500)}),[]),(0,u.jsxs)("div",{className:L,children:[c&&(0,u.jsx)("img",{className:z,src:URL.createObjectURL(c)}),(0,u.jsx)("input",{onChange:function(n){t((function(){return g({},e,x({},n.target.name,n.target.value))}))},name:"title",placeholder:"Give it a title ...",value:e.title,className:G}),(0,u.jsx)(C,{className:R,placeholder:"What's on your mind?",value:e.content,onChange:function(n){return t(g({},e,{content:n}))}}),v&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("button",{className:M,type:"button",onClick:function(){return O.apply(this,arguments)},children:"Publish"}),(0,u.jsx)("button",{onClick:function(){w.current.click()},className:M,children:"Add cover image"})]}),(0,u.jsx)("input",{id:"selectImage",className:E,type:"file",onChange:function(n){return B.apply(this,arguments)},ref:w})]})}}},function(n){n.O(0,[622,983,774,888,179],(function(){return e=99697,n(n.s=e);var e}));var e=n.O();_N_E=e}]);