(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{29537:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-post/[id]",function(){return t(40124)}])},40124:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return I}});var r=t(34051),i=t.n(r),o=t(85893),u=t(67294),a=t(11163),c=t(67665),s=t(20294),f=t(5152),p=t(58156),l=t(77294),d=t(241),h=t(14400),v=t(31838),x=t(73326);function b(n,e,t,r,i,o,u){try{var a=n[o](u),c=a.value}catch(s){return void t(s)}a.done?e(c):Promise.resolve(c).then(r,i)}function m(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function u(n){b(o,r,i,u,a,"next",n)}function a(n){b(o,r,i,u,a,"throw",n)}u(void 0)}))}}function g(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){g(n,e,t[e])}))}return n}function j(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function y(){var n=j(["\n  background-color: #fafafa;\n  outline: none;\n  border: none;\n  border-radius: 15px;\n  cursor: pointer;\n  margin-right: 10px;\n  margin-top: 15px;\n  font-size: 18px;\n  padding: 16px 70px;\n  box-shadow: 7px 7px rgba(0, 0, 0, .1);\n"]);return y=function(){return n},n}function k(){var n=j(["\n  margin-top: 40px;\n  border: none;\n  outline: none;\n  background-color: inherit;\n  font-size: 44px;\n  font-weight: 600;\n  &::placeholder {\n    color: #999999;\n  }\n"]);return k=function(){return n},n}function P(){var n=j(["\n  margin-top: 40px;\n"]);return P=function(){return n},n}function N(){var n=j(["\n  width: 900px;\n"]);return N=function(){return n},n}function O(){var n=j(["\n  width: 900px;\n  margin: 0 auto;\n"]);return O=function(){return n},n}function _(){var n=j(["\n  margin-top: 60px;\n  padding: 0px 40px;\n  border-left: 1px solid #e7e7e7;\n  border-right: 1px solid #e7e7e7;\n  & img {\n    max-width: 900px;\n  }\n"]);return _=function(){return n},n}var C="https://ipfs.io/ipfs/",E=(0,h.Ue)("https://ipfs.infura.io:5001/api/v0"),S=(0,f.default)((function(){return Promise.all([t.e(126),t.e(634),t.e(562)]).then(t.bind(t,81634))}),{loadableGenerated:{webpack:function(){return[81634]}},ssr:!1});function I(){var n=(0,u.useState)(null),e=n[0],t=n[1],r=(0,u.useState)(!0),s=r[0],f=r[1],h=(0,a.useRouter)(),b=h.query.id;function g(){return(g=m(i().mark((function n(){var e,r,o,u,a,c,s,f;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b){n.next=2;break}return n.abrupt("return");case 2:return e=new p.r("https://rinkeby.infura.io/v3/55ed44eac9054342affffcd192c1df86"),r=new l.CH(v.i,x.Mt,e),n.next=7,r.fetchPost(b);case 7:return o=n.sent,u=o[0].toNumber(),a="".concat(C,"/").concat(b),n.next=12,fetch(a);case 12:return c=n.sent,n.next=15,c.json();case 15:(s=n.sent).coverImage&&(f="".concat(C,"/").concat(s.coverImage),s.coverImagePath=f),s.id=u,t(s);case 19:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function j(){return y.apply(this,arguments)}function y(){return(y=m(i().mark((function n(){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.add(JSON.stringify(e));case 3:return t=n.sent,n.abrupt("return",t.path);case 7:n.prev=7,n.t0=n.catch(0),console.log("error: ",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}function k(){return(k=m(i().mark((function n(){var t,r,o,u;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j();case 2:return t=n.sent,r=new d.Q(window.ethereum),o=r.getSigner(),u=new l.CH(v.i,x.Mt,o),n.next=8,u.updatePost(e.id,e.title,t,!0);case 8:h.push("/");case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,u.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[b]),e?(0,o.jsxs)("div",{className:M,children:[s&&(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{onChange:function(n){return t(w({},e,{title:n.target.value}))},name:"title",placeholder:"Give it a title ...",value:e.title,className:D}),(0,o.jsx)(S,{className:G,placeholder:"What's on your mind?",value:e.content,onChange:function(n){return t(w({},e,{content:n}))}}),(0,o.jsx)("button",{className:z,onClick:function(){return k.apply(this,arguments)},children:"Update post"})]}),!s&&(0,o.jsxs)("div",{children:[e.coverImagePath&&(0,o.jsx)("img",{src:e.coverImagePath,className:H}),(0,o.jsx)("h1",{children:e.title}),(0,o.jsx)("div",{className:T,children:(0,o.jsx)(c.D,{children:e.content})})]}),(0,o.jsx)("button",{className:z,onClick:function(){return f(!s)},children:s?"View post":"Edit post"})]}):null}var z=(0,s.iv)(y()),D=(0,s.iv)(k()),G=(0,s.iv)(P()),H=(0,s.iv)(N()),M=(0,s.iv)(O()),T=(0,s.iv)(_())}},function(n){n.O(0,[622,665,983,774,888,179],(function(){return e=29537,n(n.s=e);var e}));var e=n.O();_N_E=e}]);